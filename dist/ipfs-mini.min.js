!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("IPFS",[],e):"object"==typeof exports?exports.IPFS=e():t.IPFS=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,e,n){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e){"use strict";var n=window.XMLHttpRequest;t.exports=n},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))throw Error('[ipfs-mini] IPFS instance must be instantiated with "new" flag (e.g. var ipfs = new IPFS("http://localhost:8545");).');var e=this;e.setProvider(t||{})}function o(t){for(;;){var e="----IPFSMini"+1e5*Math.random()+"."+1e5*Math.random();if(t.indexOf(e)===-1)return e}}var i=n(0);t.exports=r,r.prototype.setProvider=function(t){if("object"!=typeof t)throw Error("[ifpsjs] provider must be type Object, got '"+typeof t+"'.");var e=this,n=e.provider=Object.assign({host:"127.0.0.1",pinning:!0,port:"5001",protocol:"http",base:"/api/v0"},t||{});e.requestBase=n.protocol+"://"+n.host+":"+n.port+n.base},r.prototype.sendAsync=function(t,e){var n=this,r=new i,o=t||{},a=e||function(){};r.onreadystatechange=function(){if(4===r.readyState&&1!==r.timeout)if(200!==r.status)a(Error("[ipfs-mini] status "+r.status+": "+r.responseText),null);else try{a(null,o.jsonParse?JSON.parse(r.responseText):r.responseText)}catch(t){a(Error("[ipfs-mini] while parsing data: '"+(r.responseText+"")+"', error: "+(t+"")+" with provider: '"+n.requestBase+"'",null))}};var s=n.provider.pinning&&"/add"===t.uri?"?pin=true":"";o.payload?r.open("POST",""+n.requestBase+t.uri+s):r.open("GET",""+n.requestBase+t.uri+s),o.accept&&r.setRequestHeader("accept",o.accept),o.payload&&o.boundary?(r.setRequestHeader("Content-Type","multipart/form-data; boundary="+o.boundary),r.send(o.payload)):r.send()},r.prototype.add=function(t,e){var n="object"==typeof t&&t.isBuffer?t.toString("binary"):t,r=o(n),i="--"+r+'\r\nContent-Disposition: form-data; name="path"\r\nContent-Type: application/octet-stream\r\n\r\n'+n+"\r\n--"+r+"--",a=function(t,n){return e(t,t?null:n.Hash)};this.sendAsync({jsonParse:!0,accept:"application/json",uri:"/add",payload:i,boundary:r},a)},r.prototype.addWithPath=function(t,e,n){var r="object"==typeof t&&t.isBuffer?t.toString("binary"):t,i=o(r),a="application/octet-stream";e.replace(/\.(png|jpg|jpeg|gif)$/,function(t,e){a="image/"+e});var s="--"+i+"\r\nContent-Disposition: form-data; name="+e+"\r\nContent-Type: "+a+"\r\n\r\n"+r+"\r\n--"+i+"--",p=function(t,e){return n(t,t?null:e.Hash)};this.sendAsync({jsonParse:!0,accept:"application/json",uri:"/add",payload:s,boundary:i},p)},r.prototype.addJSON=function(t,e){var n=this;n.add(JSON.stringify(t),e)},r.prototype.stat=function(t,e){var n=this;n.sendAsync({jsonParse:!0,uri:"/object/stat/"+t},e)},r.prototype.cat=function(t,e){var n=this;n.sendAsync({uri:"/cat/"+t},e)},r.prototype.catJSON=function(t,e){var n=this;n.cat(t,function(t,n){if(t)return e(t,null);try{e(null,JSON.parse(n))}catch(r){e(r,null)}})}}])});